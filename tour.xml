<krpano version="1.21" title="Virtual Tour">

    <include url="skin/vtourskin.xml" />
    <plugin name="toolbox" url="plugins/toolbox/toolboxV2.js" keep="true" preload="true"/>

    <!-- customize skin settings: maps, gyro, webvr, thumbnails, tooltips, layout, design, ... -->
    <skin_settings maps="true"
                   maps_type="google"
                   maps_bing_api_key=""
                   maps_google_api_key=""
                   maps_zoombuttons="false"
                   maps_loadonfirstuse="true"
                   gyro="true"
                   gyro_keeplookingdirection="false"
                   webvr="true"
                   webvr_keeplookingdirection="true"
                   webvr_prev_next_hotspots="true"
                   autotour="false"
                   littleplanetintro="false"
                   followmousecontrol="false"
                   title="true"
                   thumbs="true"
                   thumbs_width="120" thumbs_height="80" thumbs_padding="10" thumbs_crop="0|40|240|160"
                   thumbs_opened="false"
                   thumbs_text="false"
                   thumbs_dragging="true"
                   thumbs_onhoverscrolling="false"
                   thumbs_scrollbuttons="false"
                   thumbs_scrollindicator="false"
                   thumbs_loop="false"
                   tooltips_buttons="false"
                   tooltips_thumbs="false"
                   tooltips_hotspots="false"
                   tooltips_mapspots="false"
                   deeplinking="false"
                   loadscene_flags="MERGE"
                   loadscene_blend="OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"
                   loadscene_blend_prev="SLIDEBLEND(0.5, 180, 0.75, linear)"
                   loadscene_blend_next="SLIDEBLEND(0.5,   0, 0.75, linear)"
                   loadingtext=""
                   layout_width="100%"
                   layout_maxwidth="814"
                   controlbar_width="-24"
                   controlbar_height="40"
                   controlbar_offset="20"
                   controlbar_offset_closed="-40"
                   controlbar_overlap.no-fractionalscaling="10"
                   controlbar_overlap.fractionalscaling="0"
                   design_skin_images="vtourskin.png"
                   design_bgcolor="0x2D3E50"
                   design_bgalpha="0.8"
                   design_bgborder="0"
                   design_bgroundedge="1"
                   design_bgshadow="0 4 10 0x000000 0.3"
                   design_thumbborder_bgborder="3 0xFFFFFF 1.0"
                   design_thumbborder_padding="2"
                   design_thumbborder_bgroundedge="0"
                   design_text_css="color:#FFFFFF; font-family:Arial;"
                   design_text_shadow="1"
                   />

    <action name="do_crop_animation" scope="local" args="framewidth, frameheight, framerate">
		<!-- define local variables -->
		calc(local.xframes, (caller.imagewidth /framewidth) BOR 0);
		calc(local.frames, xframes * ((caller.imageheight / frameheight) BOR 0));
		def(local.frame, integer, 0);
		
		<!-- set the first frame -->
		calc(caller.crop, '0|0|' + framewidth + '|' + frameheight);
		
		<!-- do the animation -->
		setinterval(calc('crop_anim_' + caller.name), calc(1.0 / framerate),
			if(caller.loaded,
				inc(frame);
				if(frame GE frames, if(caller.onlastframe !== null, callwith(caller, onlastframe() ) ); set(frame,0); );
				mod(xpos, frame, xframes);
				div(ypos, frame, xframes);
				Math.floor(ypos);
				mul(xpos, framewidth);
				mul(ypos, frameheight);
				calc(caller.crop, xpos + '|' + ypos + '|' + framewidth + '|' + frameheight);
			  ,
				<!-- stop the interval when the hotspot gets removed -->
				clearinterval(calc('crop_anim_' + caller.name));
			);
		);
	</action>

    <!--
        For an alternative skin design either change the <skin_settings> values 
        from above or optionally include one of the predefined designs from below.
    -->
    <!-- <include url="skin/vtourskin_design_flat_light.xml"  /> -->
    <!-- <include url="skin/vtourskin_design_glass.xml"       /> -->
    <!-- <include url="skin/vtourskin_design_ultra_light.xml" /> -->
    <!-- <include url="skin/vtourskin_design_117.xml"         /> -->
    <!-- <include url="skin/vtourskin_design_117round.xml"    /> -->
    <!-- <include url="skin/vtourskin_design_black.xml"       /> -->

    
    <scene name="Plazoleta_INTEC" title="Plazoleta_INTEC" onstart="" thumburl="panos/Plazoleta_INTEC.tiles/thumb.jpg" lat="18.48786111" lng="-69.96230556" alt="43.60" heading="0.0">
        
        <control bouncinglimits="calc:image.cube ? true : false" />

        <view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

        <preview url="panos/Plazoleta_INTEC.tiles/preview.jpg" />

        <image>
            <cube url="panos/Plazoleta_INTEC.tiles/%s/l%l/%v/l%l_%s_%v_%h.jpg" multires="512,1024,2048,3840" />
        </image>

        <hotspot name="intec_logo" 
                 url="images/intec.png"
                 scale="1"
                 edge="center"
                 distorted="true"
                 ath="0" 
                 atv="0" />

        <hotspot name="introduccion" 
         url="images/Introduccion.png"
         scale="0.5"
         edge="center"
         distorted="true"
         ath="0" 
         atv="0"
         onclick="set(hotspot[introduccion].visible, false); set(hotspot[spot1].visible, true);" 
         tooltip="Haz clic en este cuadro para continuar" />

        <hotspot name="spot1"
         url="images/target_green_white.png"
         onloaded="do_crop_animation(128,128,60);"
         visible="false"
         ath="-101.3985064"
         atv="3.3742353"
         scale="0.40"
         zoom="true"
         onclick="loadscene(EL_INTEC, null, MERGE, BLEND(1));" />


</scene>

    <scene name="EL_INTEC" title="EL_INTEC" onstart="" thumburl="panos/EL_INTEC.tiles/thumb.jpg" lat="18.48786111" lng="-69.96252778" alt="30.10" heading="0.0">
        
        <control bouncinglimits="calc:image.cube ? true : false" />

        <view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

        <preview url="panos/EL_INTEC.tiles/preview.jpg" />

        <image>
            <cube url="panos/EL_INTEC.tiles/%s/l%l/%v/l%l_%s_%v_%h.jpg" multires="512,1024,1792" />
        </image>

        <hotspot name="EL_Cartel" 
         url="images/EL_Cartel.png" 
         scale="0.3" 
         ath="-47.9716555" atv="-2.7811999"
		 rx="0" ry="0" rz="0"
		 ox="0.0" oy="0.0"
		 tx="0" ty="0" tz="0"
		 distorted="true"
         scale.mobile="0.2" 
         onclick="
            set(hotspot[EL_Cartel].enabled, false);  
            set(hotspot[EL_Info].enabled, false); 

            tween(hotspot[EL_Cartel].alpha, 0, 1);  
            tween(hotspot[EL_Info].alpha, 1, 1);  

            set(hotspot[EL_Cartel].visible, false);  
            set(hotspot[EL_Info].visible, true);  

            delayedcall(1, set(hotspot[EL_Info].enabled, true)); 
        "/>

		<hotspot name="EL_Info" 
         url="images/EL_Info.png" 
         visible="false" 
         scale="0.3" 
         ath="-47.9716555" atv="-2.7811999"
		 rx="0" ry="0" rz="0"
		 ox="0.0" oy="0.0"
		 tx="0" ty="0" tz="0"
		 distorted="true"
         scale.mobile="0.2" 
         onclick="
            set(hotspot[EL_Info].enabled, false); 
            tween(hotspot[EL_Info].alpha, 0, 1); 
            tween(hotspot[EL_Cartel].alpha, 1, 1);  

            set(hotspot[EL_Cartel].visible, true); 
            delayedcall(1, set(hotspot[EL_Info].visible, false));  
            delayedcall(1, set(hotspot[EL_Cartel].enabled, true)); 
        "/>

        <hotspot name="GC_Cartel" 
                url="images/GC_Cartel.png" 
                scale="0.3" 
                ath="129.1411932" atv="-2.0137506"
                rx="0" ry="0" rz="0"
                ox="0.0" oy="0.0"
                tx="0" ty="0" tz="0"
                distorted="true"
                scale.mobile="0.2" 
                onclick="
                    set(hotspot[GC_Cartel].enabled, false);  
                    set(hotspot[GC_Info].enabled, false); 

                    tween(hotspot[GC_Cartel].alpha, 0, 1);  
                    tween(hotspot[GC_Info].alpha, 1, 1);  

                    set(hotspot[GC_Cartel].visible, false);  
                    set(hotspot[GC_Info].visible, true);  

                    delayedcall(1, set(hotspot[GC_Info].enabled, true)); 
                "/>

		<hotspot name="GC_Info" 
         url="images/GC_Info.png" 
         visible="false" 
         ath="129.1411932" atv="-2.0137506"
		 rx="0" ry="0" rz="0"
		 ox="0.0" oy="0.0"
		 tx="0" ty="0" tz="0"
         alpha="0"   
         scale="0.3" 
		 distorted="true"
         scale.mobile="0.2" 
         onclick="
            set(hotspot[GC_Info].enabled, false); 
            tween(hotspot[GC_Info].alpha, 0, 1); 
            tween(hotspot[GC_Cartel].alpha, 1, 1);  

            set(hotspot[GC_Cartel].visible, true); 
            delayedcall(1, set(hotspot[GC_Info].visible, false));  
            delayedcall(1, set(hotspot[GC_Cartel].enabled, true)); 
        "/>

        <hotspot name="spot2"
         url="images/target_green_white.png"
         onloaded="do_crop_animation(128,128,60);"
         visible="true"
         ath="-102.3603098" atv="4.2446209"
         scale="0.40"
         zoom="true"
         onclick="loadscene(CSD_INTEC, null, MERGE, BLEND(1));" />
        
    </scene>

    <scene name="CSD_INTEC" title="CSD_INTEC" onstart="" thumburl="panos/CSD_INTEC.tiles/thumb.jpg" lat="18.48794444" lng="-69.96272222" alt="46.60" heading="0.0">
        
        <control bouncinglimits="calc:image.cube ? true : false" />

        <view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

        <preview url="panos/CSD_INTEC.tiles/preview.jpg" />

        <image>
            <cube url="panos/CSD_INTEC.tiles/%s/l%l/%v/l%l_%s_%v_%h.jpg" multires="512,1024,1792" />
        </image>

        <hotspot name="CSD_Cartel" 
         url="images/CSD_Cartel.png" 
         scale="0.5" 
         ath="104.8600485" atv="1.0262367"
		 rx="0" ry="0" rz="0"
		 ox="0.0" oy="0.0"
		 tx="0" ty="0" tz="0"
		 distorted="true"
         scale.mobile="0.2" 
         onclick="
            set(hotspot[CSD_Cartel].enabled, false);  
            tween(hotspot[CSD_Cartel].alpha, 0, 1);  
            set(hotspot[CSD_Cartel].visible, false);  
        "/>

        <hotspot name="spot3"
         url="images/target_green_white.png"
         onloaded="do_crop_animation(128,128,60);"
         visible="true"
         ath="-83.8635646" atv="10.9857953"
         scale="0.40"
         zoom="true"
         onclick="loadscene(Comedor_INTEC, null, MERGE, BLEND(1));" />

    </scene>

    <scene name="Comedor_INTEC" title="Comedor_INTEC" onstart="" thumburl="panos/Comedor_INTEC.tiles/thumb.jpg" lat="18.48780556" lng="-69.96280556" alt="39.40" heading="0.0">
        
        <control bouncinglimits="calc:image.cube ? true : false" />

        <view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

        <preview url="panos/Comedor_INTEC.tiles/preview.jpg" />

        <image>
            <cube url="panos/Comedor_INTEC.tiles/%s/l%l/%v/l%l_%s_%v_%h.jpg" multires="512,1024,1792" />
        </image>

        <hotspot name="Comedor_Cartel" 
         url="images/Comedor_Cartel.png" 
         scale="0.5" 
         ath="-2.4195092" atv="0.8445957"
		 rx="0" ry="0" rz="0"
		 ox="0.0" oy="0.0"
		 tx="0" ty="0" tz="0"
		 distorted="true"
         scale.mobile="0.2" 
         onclick="
            set(hotspot[Comedor_Cartel].enabled, false);  
            tween(hotspot[Comedor_Cartel].alpha, 0, 1);  
            set(hotspot[Comedor_Cartel].visible, false);   
        "/>

        <hotspot name="spot4"
         url="images/target_green_white.png"
         onloaded="do_crop_animation(128,128,60);"
         visible="true"
         ath="-178.9468594" atv="2.3342061"
         scale="0.40"
         zoom="true"
         onclick="loadscene(Final_INTEC, null, MERGE, BLEND(1));" />

    </scene>

    <scene name="Final_INTEC" title="Final_INTEC" onstart="" thumburl="panos/Final_INTEC.tiles/thumb.jpg" lat="18.48780556" lng="-69.96288889" alt="48.00" heading="0.0">
        
        <control bouncinglimits="calc:image.cube ? true : false" />

        <view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

        <preview url="panos/Final_INTEC.tiles/preview.jpg" />

        <image>
            <cube url="panos/Final_INTEC.tiles/%s/l%l/%v/l%l_%s_%v_%h.jpg" multires="512,1024,1792" />
        </image>

        <hotspot name="Final_Cartel" 
         url="images/Final_Cartel.png" 
         scale="0.5" 
         ath="-7.9040210" atv="-3.7248862"
		 rx="0" ry="0" rz="0"
		 ox="0.0" oy="0.0"
		 tx="0" ty="0" tz="0"
		 distorted="true"
         scale.mobile="0.2" 
         onclick="
            set(hotspot[Final_Cartel].enabled, false);
            tween(hotspot[Final_Cartel].alpha, 0, 1);  
            set(hotspot[Final_Cartel].visible, false);  
        "/>

    </scene>


</krpano>